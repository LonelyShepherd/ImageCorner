!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t,n){"use strict";function r(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}function i(e,t){t.insertBefore(e,t.firstChild)}Object.defineProperty(t,"__esModule",{value:!0}),t.hideOrDisplay=function(e){if("true"===e.getAttribute("aria-hidden"))return e.style.display="block",void e.setAttribute("aria-hidden",!1);e.style.display="none",e.setAttribute("aria-hidden",!0)},t.hasClass=r,t.isChildOf=function(e,t){for(;(e=e.parentNode)&&e!==t;);return!!e},t.prepend=i,t.parents=function(e){var t=e.parentNode,n=[],i=arguments[1];if(i){for(;t;){if(r(t,i))return t;t=t.parentNode}return null}for(;t;)n.push(t),t=t.parentNode;return n},t.addImages=function(e,t){t.forEach(function(t){var n=document.createElement("li");n.id=t.Id,n.className="image-item",n.setAttribute("data-title",t.Name),n.innerHTML='<div class="image-container" title="'+t.Name+'">\n                        <img src="/Uploads/'+t.OwnerId+"/"+t.Name+'">\n                        '+("Public"==t.Mode?"<span>showcasing</span>":"")+"\n                    </div>\n                    <div>\n                        <span>"+t.Name+'</span>\n                        <div class="js-dropdown js-image-dropdown">\n                            <button class="js-dropdown-drop"><i></i><i></i><i></i></button>\n                            <div class="menu" aria-hidden="true">\n                                <ul class="section">\n                                    <li><button>Share</button></li>\n                                    <li><button>Make '+("Public"==t.Mode?"Private":"Public")+"</button></li>\n                                    <li><button>Remove</button></li>\n                                </ul>\n                            </div>\n                        </div>\n                        <span>"+t.Posted+"</span>\n                    </div>",i(n,e)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.operation={pending:"pending",success:"success",failure:"failure"};var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"slide",value:function(e){switch(e){case"up":this.element.style.marginBottom="30px";break;case"down":default:this.element.style.marginBottom="-70px"}}},{key:"scheduleClosing",value:function(){var e=this;this.action.style.display="",clearTimeout(this.scheduled),this.scheduled=setTimeout(function(){e.setState(!1)},1e4)}},{key:"pauseClosing",value:function(){this.scheduled&&clearTimeout(this.scheduled),this.action.style.display="none"}},{key:"setState",value:function(e,t,n){this.state=e,this.indicator.className=t||"",this.message.innerHTML=n||"",this.state?(this.slide("up"),this.scheduleClosing()):this.slide("down")}},{key:"setElement",value:function(e){this.element=e}},{key:"getElement",value:function(){return this.element}},{key:"for",value:function(e,t){this.setElement(e),this.init(),this.setState(t)}},{key:"init",value:function(){var e=this;this.indicator=this.element.querySelector("i"),this.message=this.element.querySelector("span"),this.action=this.element.querySelector("button"),this.action.addEventListener("click",function(){e.setState(!1)})}}]),e}();t.default=i},function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};c.prototype.append=function(e,t){e=s(e),t=u(t);var n=this.map[e];this.map[e]=n?n+","+t:t},c.prototype.delete=function(e){delete this.map[s(e)]},c.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},c.prototype.set=function(e,t){this.map[s(e)]=u(t)},c.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),l(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),l(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),l(e)},t.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var a=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},m.call(y.prototype),m.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];v.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=c,e.Request=y,e.Response=v,e.fetch=function(e,n){return new Promise(function(r,i){var a=new y(e,n),o=new XMLHttpRequest;o.onload=function(){var e,t,n={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t)};n.url="responseURL"in o?o.responseURL:n.headers.get("X-Request-URL");var i="response"in o?o.response:o.responseText;r(new v(i,n))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(a.method,a.url,!0),"include"===a.credentials?o.withCredentials=!0:"omit"===a.credentials&&(o.withCredentials=!1),"responseType"in o&&t.blob&&(o.responseType="blob"),a.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function l(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function h(e){var t=new FileReader,n=f(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e,t,n,r=d(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=f(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(e,t){var n,r,i=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),a.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=(r=a)&&r.__esModule?r:{default:r},s=n(0);var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.init()}return i(e,[{key:"init",value:function(){var e=this,t=new FormData,n=document.querySelector(".image-upload-button input"),r=document.createElement("ul");[].forEach.call(n.files,function(e){var n=document.createElement("li");n.innerHTML="<span>"+e.name+"</span><span>"+e.size+" bytes</span>",r.appendChild(n),t.append(e.name,e)}),this.element.querySelector(".modal-body").appendChild(r);var i=this;this.element.addEventListener("click",function(n){switch(n.target.innerHTML){case"Upload":i.element.remove(),o.default.setState(!0,a.operation.pending,"Uploading..."),o.default.pauseClosing(),t.append("mode",i.element.querySelector(".js-select .selected").innerHTML),fetch("/User/Upload",{method:"POST",body:t,credentials:"include",headers:{Accept:"application/json"}}).then(function(e){return e.json()}).then(function(e){var t=e.files,n=document.querySelector(".corner ul.images");(0,s.addImages)(n,t),o.default.setState(!0,a.operation.success,"Upload successful")}).catch(function(){o.default.setState(!0,a.operation.failure,"Upload failed")});break;case"Cancel":e.element.remove()}})}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=(r=a)&&r.__esModule?r:{default:r},s=n(0);var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.init()}return i(e,[{key:"init",value:function(){var e=this,t=document.querySelector(".corner ul.albums"),n=document.querySelector(".corner ul.images"),r=void 0;var i=this.element.querySelector(".modal-body #upload-to-album");i.addEventListener("change",function(){r=new FormData;var t=document.createElement("ul");t.className="upload-list clearfix",[].forEach.call(i.files,function(e){var n=document.createElement("li");n.innerHTML="<span>"+e.name+"</span><span>"+e.size+" bytes</span>",t.appendChild(n),r.append(e.name,e)});var n=e.element.querySelector(".modal-body ul");console.log(n),n.parentNode.replaceChild(t,n),e.element.setAttribute("data-option","will-upload")}),this.element.addEventListener("click",function(i){var u=void 0,l=void 0;function c(){"false"!==u&&u||!(0,s.hasClass)(l,"selectable")||(l.querySelector("span").style.display="block",l.setAttribute("data-selected",!0))}switch(i.target.tagName){case"IMG":l=i.target.parentNode,u=l.getAttribute("data-selected"),c();break;case"LI":l=i.target,u=l.getAttribute("data-selected"),c();break;case"SPAN":l=i.target.parentNode,(u=l.getAttribute("data-selected"))&&"true"===u&&(0,s.hasClass)(l,"selectable")&&(l.querySelector("span").style.display="none",l.setAttribute("data-selected",!1));break;case"BUTTON":var d=e.element.querySelectorAll("ul li"),f=e.element.querySelector("input");if("Cancel"===i.target.innerHTML)return void e.element.remove();if("Create"!==i.target.innerHTML)return;var h=e.element.querySelector(".js-select .selected").innerHTML,p=[];[].forEach.call(d,function(e){"true"===e.getAttribute("data-selected")&&p.push(e.id)}),p=p.join(","),o.default.setState(!0,a.operation.pending,"Creating album..."),o.default.pauseClosing();var m=void 0,y={method:"POST",headers:{Accept:"application/json"},credentials:"include"};"will-upload"===e.element.getAttribute("data-option")?(r.append("mode",h),r.append("albumName",f.value),m="/User/UploadAlbum",y.body=r):m="/User/CreateAlbum?name="+f.value+"&mode="+h+"&selected="+p,fetch(m,y).then(function(e){return e.json()}).then(function(r){!function(e,t){var n=document.createElement("li");n.id=t.Id,n.className="album-item",n.innerHTML='<a href="/User/MyAlbum?id='+t.Id+'"></a>\n                <div>\n                    '+("Public"===t.Mode?"<span>showcasing</span>":"")+"\n                </div>\n                <div>\n                    <span>"+t.Name+"</span>\n                    <span>"+t.ImageCount+' images</span>\n                    <div class="js-dropdown js-image-dropdown">\n                        <button class="js-dropdown-drop"><i></i><i></i><i></i></button>\n                        <div class="menu" aria-hidden="true">\n                            <ul class="section">\n                                <li><button>Share</button></li>\n                                <li><button>Make '+("Public"===t.Mode?"Private":"Public")+"</button></li>\n                                <li><button>Remove</button></li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>",(0,s.prepend)(n,e)}(t,r),"will-upload"==e.element.getAttribute("data-option")&&(0,s.addImages)(n,r.Images),o.default.setState(!0,a.operation.success,"Album created"),e.element.remove()}).catch(function(){o.default.setState(!0,a.operation.failure,"Something went wrong")})}})}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.init()}return r(e,[{key:"init",value:function(){var e=this.element.querySelector("li.default").innerHTML;this.element.querySelector("span.selected").innerHTML=e,this.element.addEventListener("click",function(e){if((0,i.hasClass)(e.target,"js-select-drop")){var t=e.target.nextElementSibling;(0,i.hideOrDisplay)(t)}if("LI"===e.target.tagName){var n=e.target,r=n.innerHTML,a=n.parentNode.parentNode;a.previousElementSibling.innerHTML=r,(0,i.hideOrDisplay)(a)}})}}]),e}();t.default=a},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,d=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&h())}function h(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,u=1,l={},c=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},f.clearImmediate=h}function h(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(3),n(7))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(8),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9);var a=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.collapser=t,this.nav=n,this.navOverlay=r,this.onResize=i}return r(e,[{key:"handleOnResize",value:function(){if(this.onResize){var e=this;window.addEventListener("resize",function(){window.innerWidth>=720?(e.collapser.setAttribute("aria-hidden",!0),e.navOverlay.style.display="none",e.nav.style.marginLeft=0):"true"===e.collapser.getAttribute("aria-hidden")&&(e.nav.style.marginLeft="-240px")})}}},{key:"handleCollapserOnClick",value:function(){var e=this;e.collapser.addEventListener("click",function(){"true"===e.collapser.getAttribute("aria-hidden")&&(e.nav.style.zIndex="1000",e.navOverlay.style.display="block",e.nav.style.marginLeft=0,e.collapser.setAttribute("aria-hidden",!1))})}},{key:"handleOverlayOnClick",value:function(){var e=this;e.navOverlay.addEventListener("click",function(){"false"===e.collapser.getAttribute("aria-hidden")&&(e.navOverlay.style.display="none",e.nav.style.marginLeft="-240px",(0,i.setTimeout)(function(){return e.nav.style.zIndex="1"},300),e.collapser.setAttribute("aria-hidden",!0))})}},{key:"init",value:function(){this.handleOnResize(),this.handleCollapserOnClick(),this.handleOverlayOnClick()}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(0);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"prevImage",value:function(e){if(this.current=this.current.previousElementSibling,null!==this.current){var t=this.current.querySelector("img").getAttribute("src");this.title.innerHTML=this.current.getAttribute("data-title"),this.author.innerHTML=this.current.getAttribute("data-author")?"by "+this.current.getAttribute("data-author"):"",this.preview.setAttribute("src",t),null===this.current.previousElementSibling&&(e.target.style.display="none"),"none"===e.target.nextElementSibling.style.display&&(e.target.nextElementSibling.style.display="block")}}},{key:"nextImage",value:function(e){if(this.current=this.current.nextElementSibling,null!==this.current){var t=this.current.querySelector("img").getAttribute("src");this.title.innerHTML=this.current.getAttribute("data-title"),this.author.innerHTML=this.current.getAttribute("data-author")?"by "+this.current.getAttribute("data-author"):"",this.preview.setAttribute("src",t),null===this.current.nextElementSibling&&(e.target.style.display="none"),"none"===e.target.previousElementSibling.style.display&&(e.target.previousElementSibling.style.display="block")}}},{key:"close",value:function(){this.gallery.style.display="none"}},{key:"init",value:function(e){var t=this;this.gallery=document.querySelector(".gallery"),this.preview=this.gallery.querySelector("img"),this.prev=this.gallery.querySelector("button:nth-of-type(2)"),this.next=this.gallery.querySelector("button:last-of-type"),this.title=this.gallery.querySelector("div .title"),this.author=this.gallery.querySelector("div .author"),this.gallery.addEventListener("click",function(e){switch(e.target.getAttribute("data-action")){case"prev":t.prevImage(e);break;case"next":t.nextImage(e);break;case"close":t.close()}})}},{key:"show",value:function(e){this.current=e.parentNode.parentNode,this.prev.style.display="block",this.next.style.display="block",this.current===this.current.parentNode.children[0]&&(this.prev.style.display="none"),this.current===this.current.parentNode.children[this.current.parentNode.children.length-1]&&(this.next.style.display="none"),this.preview.setAttribute("src",e.getAttribute("src")),this.title.innerHTML=this.current.getAttribute("data-title"),this.author.innerHTML=this.current.getAttribute("data-author")?"by "+this.current.getAttribute("data-author"):"",this.gallery.style.display="block"}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"init",value:function(){document.addEventListener("click",function(e){if((0,i.hasClass)(e.target,"js-dropdown-drop")){var t=e.target.nextElementSibling;(0,i.hideOrDisplay)(t)}})}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0);n(2);var a,o=n(1),s=(a=o)&&a.__esModule?a:{default:a};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.init()}return r(e,[{key:"init",value:function(){var e=this;this.element.addEventListener("click",function(t){if("BUTTON"===t.target.tagName)switch((0,i.hasClass)(t.target,"js-modal-close")&&e.element.remove(),t.target.innerHTML){case"Create link":var n=e.element.getAttribute("data-type"),r=e.element.getAttribute("data-id");s.default.setState(!0,o.operation.pending,"Creating link..."),s.default.pauseClosing(),fetch("/User/Link?id="+r+"&type="+n,{method:"POST"}).then(function(e){return e.json()}).then(function(n){var r=e.element.querySelector(".modal-body div span"),i=document.createElement("input");i.type="text",i.readOnly=!0,i.value=n,r.parentNode.replaceChild(i,r),t.target.innerHTML="Copy link",s.default.setState(!0,o.operation.success,"Your link has been created")}).catch(function(){s.default.setState(!0,o.operation.failure,"Something went wrong")});break;case"Copy link":var a=e.element.querySelector(".modal-body div input");a.focus(),a.select();try{document.execCommand("copy")&&s.default.setState(!0,o.operation.success,"Link copied to clipboard")}catch(t){s.default.setState(!0,o.operation.failure,"Sorry, you will have to do it manually this time")}}})}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(2);var i=n(0),a=n(1),o=u(a),s=u(n(13));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"init",value:function(){function e(e){var t=(0,i.parents)(e,"image-item"),n="";return null===t?null!==(t=(0,i.parents)(e,"album-item"))&&(n="album"):n="image",{item:t,type:n}}document.body.addEventListener("click",function(t){if("BUTTON"===t.target.tagName){var n=void 0,r=void 0,u=void 0;switch(t.target.innerHTML){case"Share":case"Share album":case"Share image":var l=t.target.getAttribute("data-share");n=e(t.target),r=l?t.target:n.item,u=l?t.target.getAttribute("data-share-type"):n.type,o.default.setState(!0,a.operation.pending,"Loading..."),o.default.pauseClosing(),fetch("/User/Share?id="+r.id+"&type="+u,{credentials:"include"}).then(function(e){return e.text()}).then(function(e){var t=document.createDocumentFragment(),n=document.createElement("div");n.className="js-modal js-modal-share js-modal-no-footer",n.innerHTML=e,n.setAttribute("data-type",u),n.setAttribute("data-id",r.id),t.appendChild(n),(0,i.prepend)(t,document.body),new s.default(n),o.default.setState(!1)}).catch(function(){o.default.setState(!0,a.operation.failure,"Something went wrong")});break;case"Remove":n=e(t.target),r=n.item,u=n.type,o.default.setState(!0,a.operation.pending,"Loading..."),o.default.pauseClosing(),console.log(r),fetch("/User/Remove?id="+r.id+"&type="+u,{method:"POST",credentials:"include"}).then(function(e){return e.json()}).then(function(e){if(r.remove(),"album"===u){var t=document.querySelectorAll(".corner ul.images > li");[].forEach.call(t,function(t){~e.indexOf(+t.id)&&t.remove()})}o.default.setState(!0,a.operation.success,"Item successfuly deleted")}).catch(function(){o.default.setState(!0,a.operation.failure,"Something went wrong")});break;case"Show":t.target.parentNode.nextElementSibling.style.display="block",t.target.innerHTML="Hide";break;case"Hide":t.target.parentNode.nextElementSibling.style.display="none",t.target.innerHTML="Show";break;case"Make Private":case"Make Public":n=e(t.target),r=n.item,u=n.type,o.default.setState(!0,a.operation.pending,"Working on it..."),o.default.pauseClosing(),fetch("/User/ChangeMode?id="+r.id+"&type="+u,{method:"POST",credentials:"include"}).then(function(){var e="Make Public"===t.target.innerHTML?"Public":"Private";if(o.default.setState(!0,a.operation.success,"View mode changed to "+e),"Public"===e){t.target.innerHTML="Make Private";var n=document.createElement("span");n.innerHTML="showcasing",r.querySelector("div").appendChild(n)}else t.target.innerHTML="Make Public",r.querySelector("div span").remove()}).catch(function(){o.default.setState(!0,a.operation.failure,"Something went wrong")})}}})}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(1)),a=s(n(14)),o=s(n(12));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"init",value:function(){o.default.init(),a.default.init(),i.default.for(document.querySelector(".js-actions-info"),!1)}}]),e}();t.default=u},function(e,t,n){"use strict";var r=f(n(15)),i=f(n(11)),a=n(1),o=f(a),s=f(n(10)),u=f(n(6)),l=n(0),c=f(n(5));n(2);var d=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}r.default.init(),i.default.init(),document.querySelector("ul.images").addEventListener("click",function(e){"DIV"===e.target.tagName&&(0,l.hasClass)(e.target,"image-container")?i.default.show(e.target.querySelector("img")):"IMG"===e.target.tagName&&i.default.show(e.target)}),document.querySelector(".image-upload-button input").addEventListener("change",function(){o.default.setState(!0,a.operation.pending,"Loading..."),o.default.pauseClosing(),fetch("/User/UploadImages",{credentials:"include"}).then(function(e){return e.text()}).then(function(e){var t=document.createDocumentFragment(),n=document.createElement("div");n.className="js-modal js-modal-image-upload",n.innerHTML=e;var r=n.querySelector(".js-select");t.appendChild(n),(0,l.prepend)(t,document.body),new u.default(r),new d.default(n),o.default.setState(!1)}).catch(function(){o.default.setState(!0,a.operation.failure,"Something went wrong")})}),document.querySelector(".create-album-button").addEventListener("click",function(){o.default.setState(!0,a.operation.pending,"Loading..."),o.default.pauseClosing(),fetch("/User/NewAlbum",{credentials:"include"}).then(function(e){return e.text()}).then(function(e){var t=document.createDocumentFragment(),n=document.createElement("div");n.className="js-modal js-modal-album-create",n.innerHTML=e;var r=n.querySelector(".js-select");t.appendChild(n),(0,l.prepend)(t,document.body),new u.default(r),new c.default(n),o.default.setState(!1)}).catch(function(){o.default.setState(!0,a.operation.failure,"Something went wrong")})}),new s.default(document.getElementsByClassName("nav-collapser")[0],document.getElementsByClassName("dashboard-nav-container")[0],document.getElementsByClassName("dashboard-nav-overlay")[0],!0).init()}]);